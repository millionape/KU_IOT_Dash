<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Dash Board </title>
    <style>
        body {
            text-align: center;
        }

        #g1,
        #g2,
        #g3,
        #g4,
        #g5,
        #g6 {
            width: 200px;
            height: 160px;
            display: inline-block;
            margin: 1em;
        }

        p {
            display: block;
            width: 450px;
            margin: 2em auto;
            text-align: left;
        }
    </style>

    <!-- Bootstrap core CSS 22-->
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <!-- <link href="css/full-width-pics.css" rel="stylesheet"> -->
    <link href="css/card-col.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">DashBoard</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">UserManual</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <br>
    <br>
    <div class="card mt-5 mx-auto border-secondary" style="width:1090px">
        <div class="card-header">
            <div class=float-right>
                <ul class="nav nav-pills card-header-pills ">
                    <li class="nav-item ">
                        <a class="nav-link active" href="#">History</a>
                    </li>
                    <!-- <li class="nav-item">
                              <a class="nav-link" href="#">Link</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link disabled" href="#">Disabled</a>
                            </li> -->
                </ul>
            </div>
            <div class="float-left mt-2">
                <h4>Gateway No.
                    <%= device %> , Node No.1</h4>
            </div>

        </div>
        <div class="card-body">
            <!-- <div id="n1_airtemp"></div> -->
            <!-- <div id="n1_airhumid"></div> -->
            <div class="row">
                <div class="column">
                    <div class="card_cus">
                        <div id="n1_airtemp"></div>
                        <h3>Card 1</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>

                <div class="column">
                    <div class="card_cus">
                        <div id="n1_airhumid"></div>
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus">
                        <div id="n1_soil"></div>
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus">
                        <div id="n1_wind"></div>
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="column">
                    <div class="card_cus h-100" >
                        <br>
                        <!-- Green -->
                        <div class="progress">
                            <div class="progress-bar bg-success" id=pm1_bar aria-valuenow="0" aria-valuemin="0"
                                aria-valuemax="500" style="width: 0%"></div>
                        </div>

                        <!-- Turquoise -->
                        <div class="progress mt-1">
                            <div class="progress-bar bg-info" id=pm25_bar aria-valuenow="0" aria-valuemin="0"
                                aria-valuemax="130" style="width: 0%"></div>
                        </div>

                        <!-- Orange -->
                        <div class="progress mt-1">
                            <div class="progress-bar bg-warning" id=pm10_bar aria-valuenow="0" aria-valuemin="0"
                                aria-valuemax="500" style="width: 0%"></div>
                        </div>
                        <div class="mx-5">
                            <h6>PM1: <span class="badge badge-pill badge-success" id="pm1_badge">.... AQN</span></h5>
                                <h6>PM2.5:<span class="badge badge-pill badge-info" id="pm25_badge">.... AQN</span></h6>
                                <h6>PM10:<span class="badge badge-pill badge-warning" id="pm10_badge">.... AQN</span></h6>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card_cus h-100">
                        <img class="card-img-top" src="image/cloudy.png" id="raining_status" alt="Card image" style="width:50px;height:50px;">
                        <div class="card-body">
                            <h6 class="card-title" id="raining_status_text">Status : ......</h6>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus h-100">
                        <div id="n1_uv"></div>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus h-100">
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
            </div>
        </div>

    </div>
    </div>
    <!-- <div class="card mt-5 mx-auto" style="width:1090px">
        <div class="card-header">
            <h4 class="card-title">Device <%= device %> | Node2</h4>
        </div>
        <div class="card-body">
            <div id="n2_airtemp"></div>
            <div id="n2_airhumid"></div>
        </div> 
    </div> -->
    <br>
    <div class="card mt-5 mx-auto border-secondary" style="width:1090px">
        <div class="card-header">
            <div class=float-right>
                <ul class="nav nav-pills card-header-pills ">
                    <li class="nav-item ">
                        <a class="nav-link active" href="#">History</a>
                    </li>
                    <!-- <li class="nav-item">
                                  <a class="nav-link" href="#">Link</a>
                                </li>
                                <li class="nav-item">
                                  <a class="nav-link disabled" href="#">Disabled</a>
                                </li> -->
                </ul>
            </div>
            <div class="float-left mt-2">
                <h4>Gateway No.
                    <%= device %> , Node No.2</h4>
            </div>

        </div>
        <div class="card-body">
            <!-- <div id="n1_airtemp"></div> -->
            <!-- <div id="n1_airhumid"></div> -->
            <div class="row">
                <div class="column">
                    <div class="card_cus">
                        <div id="n2_airtemp"></div>
                        <h3>Card 1</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>

                <div class="column">
                    <div class="card_cus">
                        <div id="n2_airhumid"></div>
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus">
                        <div id="n2_soil"></div>
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus">
                        <div id="n2_wind"></div>
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="column">
                    <div class="card_cus">
                        <h3>Card 1</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>

                <div class="column">
                    <div class="card_cus">
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus">
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
                <div class="column">
                    <div class="card_cus">
                        <h3>Card 2</h3>
                        <p>Some text</p>
                        <p>Some text</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <br>
    <br>
    <br>

    <!-- Footer -->
    <footer class="page-footer font-small bg-dark">

        <!-- Copyright -->
        <div class="footer-copyright text-center py-3">© 2018 Copyright:
            <a href="https://mdbootstrap.com/education/bootstrap/"> MDBootstrap.com</a>
        </div>
        <!-- Copyright -->

    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="js/raphael-2.1.4.min.js"></script>
    <!--<script src="../justgage-1.0.1.js"></script>-->
    <script src="js/justgage.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function (event) {
            //var g1,g2,g3,g4
            var n1_uv = new JustGage({
                id: 'n1_uv',
                title: "UV Power",
                decimals: 2,
                value: 0,
                min: 0.0,
                max: 0.3,
                label: "mW/cm2",
                pointer: true,
                pointerOptions: {
                    toplength: -15,
                    bottomlength: 10,
                    bottomwidth: 12,
                    color: '#8e8e93',
                    stroke: '#ffffff',
                    stroke_width: 3,
                    stroke_linecap: 'round'
                },
                gaugeWidthScale: 0.2,
                counter: true,
                relativeGaugeSize: true,
                donut: true
            });
            var n1_soil = new JustGage({
                id: "n1_soil",
                value: 0,
                min: 0,
                max: 100,
                title: "Soil Humidity",
                label: "(%)",
                gaugeWidthScale: 0.2
            });
            var n1_wind = new JustGage({
                id: "n1_wind",
                value: 0,
                min: 0,
                max: 200,
                title: "Wind Speed",
                label: "(m/s)",
                gaugeWidthScale: 0.2
            });
            var n1_airhumid = new JustGage({
                id: "n1_airhumid",
                value: 0,
                min: 0,
                max: 100,
                title: "Air Humidity",
                label: "(%)",
                gaugeWidthScale: 0.2
            });
            var n1_airtemp = new JustGage({
                id: "n1_airtemp",
                value: 0,
                min: 0,
                max: 150,
                title: "Air temperature",
                label: "(celsius)",
                gaugeWidthScale: 0.2
            });
            var n2_airhumid = new JustGage({
                id: "n2_airhumid",
                value: 0,
                min: 0,
                max: 100,
                title: "Custom Width",
                label: "",
                gaugeWidthScale: 0.2
            });
            var n2_airtemp = new JustGage({
                id: "n2_airtemp",
                value: 0,
                min: 0,
                max: 100,
                title: "Custom Width",
                label: "",
                gaugeWidthScale: 0.2
            });
            var n2_soil = new JustGage({
                id: "n2_soil",
                value: 0,
                min: 0,
                max: 100,
                title: "Soil Humidity",
                label: "(%)",
                gaugeWidthScale: 0.2
            });
            var n2_wind = new JustGage({
                id: "n2_wind",
                value: 0,
                min: 0,
                max: 200,
                title: "Wind Speed",
                label: "(m/s)",
                gaugeWidthScale: 0.2
            });
            (function poll() {
                setTimeout(function () {
                    $.ajax({
                        url: "/dash/getdata?gid=" + '<%= device %>' +
                            "&id=5555",
                        success: function (data) {
                            try {
                                n1_airtemp.refresh(data[0].airTemp);
                                n1_airhumid.refresh(data[0].airHumid);
                                n1_wind.refresh(data[0].wind);
                                n1_soil.refresh(data[0].soilHumid);
                                n1_uv.refresh(data[0].uv);
                                var current_progress = data[0].pm1;
                                $("#pm1_bar")
                                    .css("width", current_progress)
                                    .attr("aria-valuenow", current_progress)
                                    .text(current_progress + " AQN");
                                $('#pm1_badge').text(current_progress +
                                    " AQN");
                                current_progress = data[0].pm25
                                $("#pm25_bar")
                                    .css("width", current_progress)
                                    .attr("aria-valuenow", current_progress)
                                    .text(current_progress + " AQN");
                                $('#pm25_badge').text(current_progress +
                                    " AQN");
                                current_progress = data[0].pm10
                                $("#pm10_bar")
                                    .css("width", current_progress)
                                    .attr("aria-valuenow", current_progress)
                                    .text(current_progress + " AQN");
                                $('#pm10_badge').text(current_progress +
                                    " AQN");
                                $('#raining_status').attr("src",
                                    "image/rainy.png");
                                if (data[0].rain === "1") {
                                    $('#raining_status').attr("src",
                                        "image/cloudy.png");
                                    $('#raining_status_text').text(
                                        'Status :not raining')
                                } else {
                                    $('#raining_status').attr("src",
                                        "image/rainy.png");
                                    $('#raining_status_text').text(
                                        'Status :raining')
                                }
                            } catch (err) {
                                console.log(err.message);
                            }
                        },
                        error: function () {
                            console.log('ERROR')
                            //g1.refresh(-1);
                        },
                        dataType: "json",
                        type: 'GET',
                        complete: poll
                    });
                }, 1000);
            })();
        });
    </script>
</body>

</html>